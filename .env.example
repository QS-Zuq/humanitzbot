# ============================================================
# HumanitZ Discord Bot - Configuration
# ============================================================
# Copy this file to .env and fill in your values.
# Every key is shown with its default value â€” edit what you need.
# ============================================================

# â”€â”€ Discord Bot Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Create a bot at https://discord.com/developers/applications
DISCORD_TOKEN=your_discord_bot_token_here
DISCORD_CLIENT_ID=your_discord_client_id_here

# The guild (server) ID where the bot will run
DISCORD_GUILD_ID=your_discord_guild_id_here

# Channel ID where admin messages are sent to the server (Discord â†’ [Admin] in-game)
# Used by chat relay, log watcher, !admin alerts, and as the fallback for Bot Online/Offline notifications.
ADMIN_CHANNEL_ID=your_admin_channel_id_here

# Channel ID where player chat appears (in-game â†’ Discord)
# If empty, player chat goes to the admin channel.
CHAT_CHANNEL_ID=

# Extra channel IDs to receive !admin alerts (comma-separated)
# When set, alerts go ONLY to these channels (not the chat thread). When empty, alerts go to the chat thread.
ADMIN_ALERT_CHANNEL_IDS=

# Discord user IDs of admins to auto-join to daily threads (comma-separated)
# These users will automatically be added to new activity + chat threads so they stay visible.
# Get user IDs by enabling Developer Mode in Discord â†’ right-click user â†’ Copy User ID
ADMIN_USER_IDS=

# â”€â”€ HumanitZ Server RCON Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Get these from your Bisect Hosting control panel
RCON_HOST=your_server_ip_here
RCON_PORT=27015
RCON_PASSWORD=your_rcon_password_here

# â”€â”€ Timezone â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# IANA timezone used for daily thread boundaries, summaries, and all displayed times.
# Defaults to UTC if omitted.
# Examples: UTC, America/New_York, America/Chicago, Europe/London, Europe/Tallinn
# Full list: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
BOT_TIMEZONE=UTC

# â”€â”€ Bot Behavior â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# How often to poll server chat (ms)
CHAT_POLL_INTERVAL=10000

# How often to refresh server status cache (ms)
STATUS_CACHE_TTL=30000

# How often to update status voice channels (ms, minimum 60000)
# Discord rate-limits channel renames to ~2 per 10 minutes per channel,
# so 5 minutes (300000) is a safe default.
STATUS_CHANNEL_INTERVAL=300000

# How often to update the server-status text embed (ms)
SERVER_STATUS_INTERVAL=30000

# Channel ID for the live server-status embed
SERVER_STATUS_CHANNEL_ID=

# â”€â”€ Auto-Messages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Discord invite link broadcast in-game (leave empty to skip Discord link broadcasts)
DISCORD_INVITE_LINK=

# How often to broadcast Discord link in-game (ms, default 30 min)
AUTO_MSG_LINK_INTERVAL=1800000

# How often to broadcast promo message in-game (ms, default 45 min)
AUTO_MSG_PROMO_INTERVAL=2700000

# How often to check for new joins for welcome message (ms)
AUTO_MSG_JOIN_CHECK=10000

# â”€â”€ SFTP Log / Save File Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SFTP credentials for your game server hosting.
# Only host, port, user, and password are required â€” file paths are auto-discovered!
# On first run, the bot connects via SFTP and searches for all needed files.
# Discovered paths are saved back to this file automatically.
FTP_HOST=
FTP_PORT=8821
FTP_USER=
FTP_PASSWORD=

# File paths below are auto-discovered on first run. Only set them manually
# if auto-discovery fails or you need to override the detected paths.
FTP_LOG_PATH=/HumanitZServer/HMZLog.log
FTP_CONNECT_LOG_PATH=/HumanitZServer/PlayerConnectedLog.txt
FTP_ID_MAP_PATH=/HumanitZServer/PlayerIDMapped.txt
LOG_POLL_INTERVAL=30000

# Channel ID for game log events (damage, builds, etc.)
LOG_CHANNEL_ID=

# Path to the dedicated server save file (for kill stats, vitals, inventory)
FTP_SAVE_PATH=/HumanitZServer/Saved/SaveGames/SaveList/Default/Save_DedicatedSaveMP.sav
SAVE_POLL_INTERVAL=300000

# Path to the server settings ini (used by PvP scheduler + server status embed)
FTP_SETTINGS_PATH=/HumanitZServer/GameServerSettings.ini

# Path to the join welcome message file (managed by ENABLE_WELCOME_FILE)
FTP_WELCOME_PATH=/HumanitZServer/WelcomeMessage.txt

# â”€â”€ Player Stats Channel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Dedicated channel for the player-stats embed with dropdown
PLAYER_STATS_CHANNEL_ID=

# â”€â”€ Feature Toggles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# All modules are enabled by default. Set to false to disable.
# The bot checks dependencies at startup â€” if a required config value is
# missing the module is automatically skipped (shown as ðŸŸ¡ in the online embed).
# Disabled modules show as âš«. No module will crash because another is off.

FIRST_RUN=true                     # Downloads logs via SFTP and rebuilds player-stats.json + playtime.json.
                                   # Automatically set to false after first successful start.

# â”€â”€ Core modules (no dependencies beyond RCON) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ENABLE_STATUS_CHANNELS=true        # Voice-channel player-count dashboard
                                   #   â†’ no extra config needed
ENABLE_SERVER_STATUS=true          # Live server-status text embed
                                   #   â†’ requires SERVER_STATUS_CHANNEL_ID
ENABLE_CHAT_RELAY=true             # Bidirectional chat bridge + !admin alerts
                                   #   â†’ requires ADMIN_CHANNEL_ID
ENABLE_AUTO_MESSAGES=true          # Periodic broadcasts + join welcomes
                                   #   â†’ no extra config needed (sub-features below)
ENABLE_PLAYTIME=true               # Cumulative playtime tracking
                                   #   â†’ always active internally; other modules auto-init if needed

# â”€â”€ SFTP-dependent modules â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# These require FTP_HOST + FTP_USER + FTP_PASSWORD to be set.
# If SFTP creds are missing, the module is auto-skipped (ðŸŸ¡).

ENABLE_LOG_WATCHER=true            # SFTP log parsing â†’ daily activity threads
                                   #   â†’ requires SFTP creds + LOG_CHANNEL_ID
ENABLE_PLAYER_STATS=true           # Save-file parsing â†’ stats embed + dropdown
                                   #   â†’ requires SFTP creds + PLAYER_STATS_CHANNEL_ID
                                   #   â†’ enhanced when Log Watcher is active (kill/survival feed)

# â”€â”€ Log Watcher sub-features â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# These only work when ENABLE_LOG_WATCHER is active (not just enabled â€” it
# must have started successfully). Auto-skipped (ðŸŸ¡) if Log Watcher is off.

ENABLE_KILL_FEED=true              # Post zombie kill batches to daily activity thread
ENABLE_PVP_KILL_FEED=true          # Post PvP kills (damageâ†’death attribution)
PVP_KILL_WINDOW=60000              # ms to attribute a kill after damage (default 60s)

# Death loop detection: collapses rapid-fire death embeds into a single summary.
# All deaths are still counted in stats â€” only Discord embed spam is reduced.
ENABLE_DEATH_LOOP_DETECTION=true   # Detect rapid deaths and post summary instead
DEATH_LOOP_THRESHOLD=3             # Deaths within window to trigger (default 3)
DEATH_LOOP_WINDOW=60000            # Time window in ms (default 60s)

# â”€â”€ Thread Mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# By default, chat relay and activity logs are posted inside daily threads.
# Set to false to post directly to the channel instead (no threads).
USE_CHAT_THREADS=true              # Chat relay: daily threads in ADMIN/CHAT channel
USE_ACTIVITY_THREADS=true          # Log watcher: daily threads in LOG channel

# â”€â”€ PvP Scheduler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Toggles PVP on/off at scheduled real-world times.
# Edits GameServerSettings.ini via SFTP and restarts the server.
#   â†’ requires SFTP creds + PVP_START_TIME + PVP_END_TIME
#   â†’ enhanced when Log Watcher is active (activity log announcements)

ENABLE_PVP_SCHEDULER=false         # Disabled by default
PVP_START_TIME=18:00               # PvP turns ON  (HH:MM format, in PVP_TIMEZONE)
PVP_END_TIME=22:00                 # PvP turns OFF (HH:MM format, in PVP_TIMEZONE)
PVP_TIMEZONE=UTC                   # IANA timezone for PvP schedule
                                   # https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
                                   # DST is handled automatically (e.g. America/New_York = EST or EDT)
PVP_RESTART_DELAY=10               # Minutes of countdown warnings before restart (10,5,3,2,1)
PVP_UPDATE_SERVER_NAME=false       # Append "PVP Enabled HH:MM-HH:MM timezone" to server name during PvP window
PVP_DAYS=                          # Comma-separated days PvP is active (e.g. Mon,Wed,Fri). Empty = every day.
                                   # Accepts: Mon/Tue/Wed/Thu/Fri/Sat/Sun, full names, or 0-6 (Sun=0)

# â”€â”€ Auto-message sub-features â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Only apply when ENABLE_AUTO_MESSAGES=true
ENABLE_AUTO_MSG_LINK=true          # Periodic Discord-link broadcast (RCON admin message)
ENABLE_AUTO_MSG_PROMO=true         # Periodic promo-message broadcast (RCON admin message)
ENABLE_WELCOME_FILE=true           # Write WelcomeMessage.txt to server via SFTP (colored join popup)
                                   #   â†’ requires SFTP credentials (FTP_HOST etc.)
                                   #   Written at bot startup + after each save poll (game reads at startup only)
# Custom lines (pipe-separated). Leave empty for the rich default layout.
# Placeholders: {server_name}, {day}, {season}, {weather}, {pvp_schedule}, {discord_link}
# Game rich text tags: <PN> red, <PR> green, <SP> ember, <FO> gray, <CL> blue. Close with </>
WELCOME_FILE_LINES=

# â”€â”€ Player stats embed sections â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Only apply when ENABLE_PLAYER_STATS is active.
SHOW_RAID_STATS=false              # Raid stats (default: off for PVE servers)
SHOW_PVP_KILLS=false               # "Last 10 PvP Kills" on overview embed (default: off)
SHOW_VITALS=true                   # Health, hunger, thirst, energy, infection
SHOW_STATUS_EFFECTS=true           # Active afflictions
SHOW_INVENTORY=true                # Equipped items
SHOW_RECIPES=true                  # Unlocked recipes
SHOW_LORE=true                     # Lore entries found
SHOW_CONNECTIONS=true              # Join/leave history
SHOW_CHALLENGE_DESCRIPTIONS=true   # Show challenge descriptions alongside progress numbers

# â”€â”€ Server status embed sections â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Only apply when ENABLE_SERVER_STATUS is active.
SHOW_SERVER_SETTINGS=true          # Server settings grid (from GameServerSettings.ini via SFTP)
SHOW_EXTENDED_SETTINGS=true        # Extra settings: bandits, companions, territory, vehicles
SHOW_LOOT_SCARCITY=true            # Loot rarity breakdown
SHOW_WEATHER_ODDS=false            # Weather multiplier breakdown (niche â€” off by default)
SHOW_SERVER_VERSION=true           # Game version (from RCON)
SHOW_SERVER_PERFORMANCE=true       # FPS + AI count (from RCON)
SHOW_SERVER_DAY=true               # In-game day number (from RCON)
SHOW_SEASON_PROGRESS=true          # Day X/Y within current season (requires DaysPerSeason from settings)

# â”€â”€ Overview embed leaderboards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Only apply when ENABLE_PLAYER_STATS is active (requires save file).
SHOW_MOST_BITTEN=true              # "Most Bitten" leaderboard on overview embed
SHOW_MOST_FISH=true                # "Most Fish Caught" leaderboard on overview embed
SHOW_WEEKLY_STATS=true             # "This Week" leaderboards alongside all-time (requires save + logs)
WEEKLY_RESET_DAY=1                 # Day of week to reset weekly stats (0=Sun, 1=Mon, â€¦ 6=Sat)
